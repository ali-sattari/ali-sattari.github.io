<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>When to Alert on What? - Ali's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="When to Alert on What?"><meta itemprop=description content="We have all been there when we go into a new company or team, looking at their stack and especially alerting, and something feels a bit &mldr; off? This is an honest attempt to categorize alerting into some bands or levels to make it easier to reason about where things are and have a glimpse at the road ahead. Or, in other words, to put words on those vague feelings. The levels aren&rsquo;t meant to be followed in sequence; some can be skipped, others not. Moreover, this is by no means a yet-another-maturity-model1; use it as such at your own risk. The end goal of any alert is (besides being actionable) to detect problems affecting your users fast enough without being too trigger-happy[citation needed]."><meta itemprop=datePublished content="2023-01-14T09:10:11+02:00"><meta itemprop=dateModified content="2023-01-14T09:10:11+02:00"><meta itemprop=wordCount content="1388"><meta itemprop=keywords content="sre,alerting,"><meta property="og:title" content="When to Alert on What?"><meta property="og:description" content="We have all been there when we go into a new company or team, looking at their stack and especially alerting, and something feels a bit &mldr; off? This is an honest attempt to categorize alerting into some bands or levels to make it easier to reason about where things are and have a glimpse at the road ahead. Or, in other words, to put words on those vague feelings. The levels aren&rsquo;t meant to be followed in sequence; some can be skipped, others not. Moreover, this is by no means a yet-another-maturity-model1; use it as such at your own risk. The end goal of any alert is (besides being actionable) to detect problems affecting your users fast enough without being too trigger-happy[citation needed]."><meta property="og:type" content="article"><meta property="og:url" content="https://ali.sattari.me/posts/2023/when-to-alert-on-what/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-14T09:10:11+02:00"><meta property="article:modified_time" content="2023-01-14T09:10:11+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="When to Alert on What?"><meta name=twitter:description content="We have all been there when we go into a new company or team, looking at their stack and especially alerting, and something feels a bit &mldr; off? This is an honest attempt to categorize alerting into some bands or levels to make it easier to reason about where things are and have a glimpse at the road ahead. Or, in other words, to put words on those vague feelings. The levels aren&rsquo;t meant to be followed in sequence; some can be skipped, others not. Moreover, this is by no means a yet-another-maturity-model1; use it as such at your own risk. The end goal of any alert is (besides being actionable) to detect problems affecting your users fast enough without being too trigger-happy[citation needed]."><link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://ali.sattari.me/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://ali.sattari.me/css/main.css><link rel=stylesheet type=text/css href=https://ali.sattari.me/css/custom.css><link id=dark-scheme rel=stylesheet type=text/css href=https://ali.sattari.me/css/dark.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<script src=https://ali.sattari.me/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://ali.sattari.me/>Ali's Blog</a></h1><div class=site-description><p>Musings about technology, books and skepticism!</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/ali-sattari title=Github><i data-feather=github></i></a></li><li><a href=https://twitter.com/ali_sattari title=Twitter><i data-feather=twitter></i></a></li><li><a href=https://hardcover.app/@ali.sattari title=Hardcover><i data-feather=book-open></i></a></li><li><a href=https://www.linkedin.com/in/alisattari/ title=LinkedIn><i data-feather=linkedin></i></a></li><li><a href=/index.xml title=RSS><i data-feather=rss></i></a></li></ul></nav><span class=scheme-toggle><a href=# id=scheme-toggle></a></div><nav class=nav><ul class=flat><li><a href=/about>About</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>14</span>
<span class=rest>Jan 2023</span></div></div><div class=matter><h1 class=title>When to Alert on What?</h1></div></div><div class=markdown><p>We have all been there when we go into a new company or team, looking at their stack and especially alerting, and something feels a bit &mldr; off? This is an honest attempt to categorize alerting into some bands or levels to make it easier to reason about where things are and have a glimpse at the road ahead. Or, in other words, to put words on those vague feelings. The levels aren&rsquo;t meant to be followed in sequence; some can be skipped, others not. Moreover, this is by no means a yet-another-maturity-model<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>; use it as such at your own risk. The end goal of any alert is (besides being actionable) to detect problems affecting your users fast enough without being too trigger-happy<sup>[citation needed]</sup>.</p><p>If you are confused about how this can help you, you can start by finding the level that describes your current state of alerting, then see if the service matches the level described, if not, look around to find out whether it is behind or there is some pre-mature engineering going on.</p><h2 id=l0-no-alerts-only-human-detection>L0: No alerts, Only human detection!</h2><blockquote><p>tl;dr when there is little to no user impact from downtime.</p></blockquote><p>Let&rsquo;s be honest, everyone has done that at some point, maybe a weekend-project of our own, our blog, or a very early-stage startup. In each case, it is either lack of serious impact on the audience or the fact that someone is constantly fiddling with the service (or both) that drives no alert mode. It works up to some extent, as far as the cost of setting up or using a service for monitoring and alerting is greater than any loss of profit from degraded services.</p><p>This has its benefits: no overhead of implementing and maintaining a monitoring and alerting system, even if as easy as the instrumentation of a SaaS provider. The other benefit is little to no false positives. The downsides can be a background level of stress for operators of the system and a constant inner nag to periodically check if everything works. This consumes precious human cognitive energy and imposes unnecessary stress, more so when the service attracts more customers and downtimes begin to matter more.</p><h2 id=l1-alerting-on-system-metrics>L1: Alerting on System Metrics</h2><blockquote><p>tl;dr when service runs on one or two dedicated nodes.</p></blockquote><p>System metrics here refer to basic operating system resources, like CPU, memory, disk, and network usage. Load average in *nix systems is also a viable source<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. Monitoring them and alerting against them is often easy; there are a lot of single-binary agents to collect these, and understanding them isn&rsquo;t that difficult, as you would be mostly dealing with percentages.</p><p>Sometimes system metrics and alerting based on them are seen as this legend of ancient times when baremetals and servers as pets<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> were the thing. They can still make sense if you only have one or a few hosts running your services, then system metrics can correlate well with service quality (in cases other than logical issues) and are much easier to monitor. But once you have some redundancy in your system, when saturation of one host&rsquo;s resources doesn&rsquo;t immediately impact user experience, this mode stops being useful and quickly becomes noisy.</p><h2 id=l2-alerting-on-service-metrics>L2: Alerting on Service Metrics</h2><blockquote><p>tl;dr when service has some observability, and serves only a handful of endpoints.</p></blockquote><p>Monitoring a service&rsquo;s outward interactions is what is often meant by service metrics; for APIs, this would be HTTP response code and response latency. This is already a few steps close to user experience, and it takes the degradation of dependencies into account. These are best observed from a load-balancer point of view and aggregated across all (identical) instances serving traffic. You might choose to group by HTTP verb or path<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>, but that&rsquo;s often the extent to which they get detailed.</p><p>Once your service has some instrumentation and basic observability going on, this would be an obvious choice. This fits the most when your service has few endpoints and only one or two user journeys. Once user journeys start to get more complex and involve multiple calls to different endpoints, this stops being useful; for example, traffic at some endpoints might hide some issues at other lower-traffic endpoints.</p><h2 id=l3-alerting-on-sli>L3: Alerting on SLI</h2><blockquote><p>tl;dr when service is on the path to scale, and user journeys are a thing!</p></blockquote><p>At some point in time, you might start the SRE journey, and defining SLIs is one of the first steps. You are getting familiar with the landscape and just started defining user journeys and focusing on customer happiness as the key metric for service reliability. You end up with a few SLIs for your service and alerting against that with a fixed (percentage) threshold can provide value. It is not the best of the SRE world yet, as it can be noisy at times, but this will provide a smoother transition to the next level.</p><p>This makes sense when your service has found product-market fit, has a stable set of user journeys, and is out of the valley of death<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>, so it is there to stay and is beginning to scale. This is when you feel the need to prioritize between different user journeys (that translates into a different set of endpoints on your API perhaps), instead of blanket treating all requests to your service the same.</p><h2 id=l4-alerting-on-remaining-error-budget>L4: Alerting on remaining Error Budget</h2><blockquote><p>tl;dr when SLI and SLO are set for the service, and an Error Budget Policy document exists.</p></blockquote><p>Once you continue in the SRE journey, you will inevitably get to Error Budgets<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>; in short, it describes how much an SLI can fail (be below SLO) and still be considered fine. This is a step extra on top of alerting on SLI since you don&rsquo;t care about every time your SLI dropped below a threshold; what you care about is how much of the budget still remains. In this sense, a low but constant rate of error won&rsquo;t trigger an alert, as long as it is within budget. This results in a much less trigger-happy alerting condition<sup>[citation needed]</sup>.</p><p>Having error budget alerting makes sense when you have SLIs and SLOs established for your service and also have an error budget policy in place. The first part is about getting comfortable with the process and terminology without overburdening the team. And having an error budget policy means all stakeholders have agreed on the consequences of a depleted budget. You could skip the previous level and once you have your SLI and SLO jump into alerting based on EB, but I advise you to do so only if it is not the first time for the team.</p><h2 id=l5-alerting-on-multi-window-multi-burn-rate-error-budget>L5: Alerting on Multi-window Multi-burn-rate Error Budget</h2><blockquote><p>tl;dr when you don&rsquo;t have much better things to do, or when alerting is inefficient.</p></blockquote><p>Just when you thought you were at the peak of the alerting hierarchy, yet another one hits you! You often don&rsquo;t want to let the budget burn through to take action; you want to get alerted if it is burning too fast but also recover the alert state quickly once the burning stops. This is where multi-window, multi-burn-rate alerting against the rate of error budget burn comes into the picture. It is described in good detail <a href=https://sre.google/workbook/alerting-on-slos/#6-multiwindow-multi-burn-rate-alerts>here</a>, so I won&rsquo;t go through the whys and hows here.</p><p>This level of alerting makes sense for a service that is mature enough feature-wise, has its architecture fit for SLO<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup> and receives a high volume of traffic around the clock. It also requires good knowledge of alerting and an SRE mindset within the team to create and maintain such alerts (yes, the expressions can get&mldr; ugly). This is, if the previous criteria match, the height of alerting for a service, in my opinion. It has the least amount of noise, is often pretty actionable, and doesn&rsquo;t hide away re-occurring issues.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Nothing against them, they can be pretty useful when utilized correctly: <a href=https://martinfowler.com/bliki/MaturityModel.html>https://martinfowler.com/bliki/MaturityModel.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Can be tricky to reason about though: <a href=https://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html>https://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>I spent 5 minutes looking for a good source to explain this without all the VC bullshit, but didn&rsquo;t succeed, Google it yourself and pick one that suits you!&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>More on that in Google&rsquo;s SRE book: <a href=https://sre.google/sre-book/embracing-risk/#id-na2u1S2SKi1-marker>https://sre.google/sre-book/embracing-risk/#id-na2u1S2SKi1-marker</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>The more 9s the more redundancy, right?&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>Good intro if you are not familar with pet vs cattle analogy: <a href=https://cloudscaling.com/blog/cloud-computing/the-history-of-pets-vs-cattle/#understanding-pets-and-cattle>https://cloudscaling.com/blog/cloud-computing/the-history-of-pets-vs-cattle/#understanding-pets-and-cattle</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>In Prometheus world it would be something like <code>sum by(path) (http_server_requests_total{app="my-shiny-app", method="post"})</code>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=tags><ul class=flat><li><a href=/tags/sre>sre</a></li><li><a href=/tags/alerting>alerting</a></li></ul></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-1ZG9PT72LY"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1ZG9PT72LY")</script><div class="footer wrapper"><nav class=nav><div>2023 All contents under <a href=https://www.gnu.org/licenses/fdl-1.3.html>GNU FDL</a> | <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101616403-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script>feather.replace()</script></body></html>